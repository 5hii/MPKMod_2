subprojects {
    apply plugin: 'java'
}

allprojects {
    if (plugins.hasPlugin('java')) {
        tasks.withType(JavaCompile) {
            sourceCompatibility = '1.8'
            targetCompatibility = '1.8'
        }
        dependencies {
            compile 'com.github.JnCrMx:discord-game-sdk4j:v0.5.5'

            compile 'com.fasterxml.jackson.core:jackson-core:2.8.8'
            compile 'com.fasterxml.jackson.core:jackson-annotations:2.8.8'
            //if changed to newer version gives IllegalArgumentException (no error message) idfk why
            compile 'com.fasterxml.jackson.core:jackson-databind:2.8.8'

            testImplementation 'org.junit.jupiter:junit-jupiter-api:5.9.1'
            testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine:5.9.1'
        }

        repositories {
            mavenCentral()
            maven { url = "https://jitpack.io" }
        }

        test {
            useJUnitPlatform()
        }
    }
}